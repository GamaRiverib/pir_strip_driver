<html> <head> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"> <meta name="theme-color" content="#666"/> <meta name="mobile-web-app-capable" content="yes"> <link rel="stylesheet" href="style.css"> </head> <body> <div id="loading_mask"> <div class="loading"></div></div><div class="container"> <div class="navbar"> <ul> <li style="float: left;"><a href="menu.html">Menu</a></li></ul> </div><div class="row c"> <div class="col-12"> <small class="device-name"></small> </div></div><div class="row t c"> <div class="col-12"> <h2 class="mode-display"></h2> <small>Mode</small> </div></div><div class="footer"> <button id="submit_btn"></button> </div></div></body> <script type="text/javascript" src="script.js"></script> <script>let btn=document.getElementById("submit_btn"); btn.setAttribute("hidden", true); function sBT(m, b){switch(m){case 0: b.innerText="TURN ON"; b.setAttribute("href", "#Driver.On"); break; case 1: b.innerText="EFFECT"; b.setAttribute("href", "#Driver.Effect"); break; case 2: b.innerText="NEXT EFFECT"; b.setAttribute("href", "#Driver.Next"); break; default: b.innerText="TURN OFF"; b.setAttribute("href", "#Driver.Off");}b.onclick=function(e){e.preventDefault(); e.target.addEventListener(EVENTS.RPC_CALLBACK, getState); rpc(e);};}function getState(){getJson(url + "Driver.State", function(err, resp){if (err !==null){alert("Error trying to get the device state. Check if you are connected to it."); return window.location.href=PAGES.CONNECTING;}sHbC("device-name", resp.id || ""); sHbC("mode-display", MODES[resp.mode]); btn.setAttribute("hidden", false); sBT(resp.mode, btn);}, "Getting device state...");}getState(); </script></html>